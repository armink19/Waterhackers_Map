<body>
<form [formGroup]="form" (ngSubmit)="submit()">
  <mat-horizontal-stepper>
    <!-- change default 'edit' icon -->
    <ng-template matStepperIcon="edit">
      <mat-icon></mat-icon>
    </ng-template>
    <mat-step *ngFor="let step of steps; let index = index; let last = last;">
      <ng-template matStepLabel>{{ step.label }}</ng-template>

      <formly-form
        [form]="form.at(index)"
        [model]="model"
        [fields]="step.fields"
        [options]="options[index]">
      </formly-form>

      <div >
        <button *ngIf="index !== 0 && !last" matStepperPrevious class="btn btn-primary" type="button" (click)="prevStep(index)">Back</button>
        <button *ngIf="!last &&index!==2" matStepperNext class="btn btn-primary" type="button" [disabled]="!form.at(index).valid" (click)="nextStep(index)">Next</button>



        <button *ngIf="index==2" matStepperNext class="btn btn-primary" type="button" [disabled]="!form.at(index).valid" (click)="nextStep(index)">Submit</button>

      </div>
      <div class="butts">
        <p *ngIf="last"  style="font-size: 12px; font-family: GothamBold">YOU HAVE RUN THE TESTS, BUT THAT’S JUST THE FIRST STEP.<br>
          NOW IT’S TIME TO INTERPRET YOUR RESULTS AND DEVELOP A PLAN FOR<br>
          ACTION. ONCE YOU UNDERSTAND THE HEALTH OF YOUR WATER THEN YOU CAN<br>
          HELP OTHERS TO PROTECT AND RESTORE IT.<br>
          <br>
          CONTINUE TO EXPERIENCE WATER IN OUR<br>
          WATER HACKER COMMUNITY.</p>
        <button *ngIf="last"  onclick="location.href = '/map';" style="background-color: #3f4e57; border-color: #3f4e57;width: 300px ">Back to Map</button><br>
        <button *ngIf="last" onclick="location.href = 'http://water-hackers.lu/';" style="background-color: #ffcc66; border-color: #ffcc66;width: 300px "  >Back to Water-Hackers.lu</button>
      </div>
    </mat-step>
  </mat-horizontal-stepper>
</form>
</body>
